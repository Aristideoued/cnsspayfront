<div class="addContainer">
  <div class="modalHeader">
    <div class="avatarDetails">
      <div class="modalTitle">
        {{dialogTitle}}
      </div>
    </div>
    <button mat-icon-button (click)="dialogRef.close()" class="modal-close-button" aria-label="Close dialog">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <div mat-dialog-content>
          <form class="m-4" [formGroup]="projectForm" (ngSubmit)="onSubmit()">
              <div class="row">
                <!--<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Project ID</mat-label>
                    <input matInput formControlName="projectID" required>
                    @if (projectForm.get('projectID')?.hasError('required')) {
                    <mat-error>
                      Project ID is required
                    </mat-error>
                    }
                  </mat-form-field>
                </div>-->
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Titre</mat-label>
                    <input matInput formControlName="projectTitle" placeholder="Project Title" required>
                    @if (projectForm.get('projectTitle')?.hasError('required')) {
                    <mat-error>
                      Le titre est obligatoire
                    </mat-error>
                    }
                  </mat-form-field>
                </div>
                 <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Client</mat-label>
                    <mat-select formControlName="client" required>
                      <mat-option *ngFor="let ben of beneficiaires" [value]="ben.id">
                          {{ ben.structure }}
                        </mat-option>
                    </mat-select>
                    @if (projectForm.get('client')?.hasError('required')) {
                    <mat-error>
                      Le client est obligatoire
                    </mat-error>
                    }
                  </mat-form-field>
              </div>
              <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Departement</mat-label>
                    <mat-select formControlName="department" required>
                       <mat-option *ngFor="let dep of departements" [value]="dep.id">
                          {{ dep.nom }}
                        </mat-option>
                    </mat-select>
                    @if (projectForm.get('department')?.hasError('required')) {
                    <mat-error>
                      Le departement est obligatoire
                    </mat-error>
                    }
                  </mat-form-field>
                </div>

                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Priorité</mat-label>
                    <mat-select formControlName="priority" required>
                       <mat-option *ngFor="let dep of priorities" [value]="dep.id">
                          {{ dep.nom }}
                        </mat-option>
                    </mat-select>
                    @if (projectForm.get('priority')?.hasError('required')) {
                    <mat-error>
                      La priotité est obligatoire
                    </mat-error>
                    }
                  </mat-form-field>
                </div>
                <!--<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Priorité</mat-label>
                    <mat-select formControlName="priority" required>
                      <mat-option [value]="'0'">
                        Basse
                      </mat-option>
                      <mat-option [value]="'1'">
                        Moyenne
                      </mat-option>
                      <mat-option [value]="'2'">
                        Elevée
                      </mat-option>
                    </mat-select>
                    @if (projectForm.get('priority')?.hasError('required')) {
                    <mat-error>
                     La priorité est obligatoire
                    </mat-error>
                    }
                  </mat-form-field>
                </div>-->
              </div>
           


                <!--<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Client</mat-label>
                    <input matInput formControlName="client" required>
                    @if (projectForm.get('client')?.hasError('required')) {
                    <mat-error>
                      Client name is required
                    </mat-error>
                    }
                  </mat-form-field>
                </div>-->
                <!--<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Price</mat-label>
                    <input matInput formControlName="price" type="number" required>
                    @if (projectForm.get('price')?.hasError('required')) {
                    <mat-error>
                      Price is required
                    </mat-error>
                    }
                  </mat-form-field>
                </div>-->
              </div>
              <div class="row">


                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Date de début</mat-label>
                      <input matInput [matDatepicker]="picker" formControlName="startDate" required>
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                                        <!--<input matInput [matDatepicker]="picker" formControlName="startDate" required>
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>-->
                    @if (projectForm.get('startDate')?.hasError('required')) {
                    <mat-error>
                     Veuillez selectionner une date
                    </mat-error>
                    }
                  </mat-form-field>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Date de fin prevue</mat-label>
                    <input matInput [matDatepicker]="picker1" formControlName="endDate" required>
                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                    @if (projectForm.get('endDate')?.hasError('required')) {
                    <mat-error>
                       Veuillez selectionner une date
                    </mat-error>
                    }
                  </mat-form-field>
                </div>
              </div>
                <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width mb-3" appearance="outline">
                    <mat-label>Type du projet</mat-label>
                    <mat-select formControlName="type" required>
                       <mat-option *ngFor="let dep of types" [value]="dep.id">
                          {{ dep.libelle }}
                        </mat-option>
                    </mat-select>
                    @if (projectForm.get('type')?.hasError('required')) {
                    <mat-error>
                      Le type est obligatoire
                    </mat-error>
                    }
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Responsable</mat-label>
                    <mat-select formControlName="team" multiple required>
                      @for (team of employes; track team) {
                      <mat-option [value]="team.id">{{team.nom}} {{team.prenom}}
                      </mat-option>
                      }
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-4">
                  <mat-label> Status: </mat-label>
                 <mat-radio-group formControlName="status">
                  <!--<mat-radio-button value="Active">Actif</mat-radio-button>-->
                  <mat-radio-button value="Nouveau" [checked]="true">Nouveau</mat-radio-button>
                  <mat-radio-button value="En cours" >En cours</mat-radio-button>
                  <mat-radio-button value="En attente">En attente</mat-radio-button>
                  <mat-radio-button value="Non démarré">Non démarré</mat-radio-button>
                  <mat-radio-button value="Annulé">Annulé</mat-radio-button>
                   <mat-radio-button value="Terminé">Terminé</mat-radio-button>

                   
                </mat-radio-group>

                </div>
              </div>
            
              <div class="row">
                <mat-label>Description: </mat-label>
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                  <div class="NgxEditor__Wrapper">
                    <ngx-editor-menu [editor]="editor!" [toolbar]="toolbar!"> </ngx-editor-menu>
                    <ngx-editor formControlName="description" [editor]="editor!" [placeholder]="'Type here...'" class="NgxEditorStyles"></ngx-editor>
                  </div>
                </div>
              </div>
              <!--<div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                  <mat-label>Upload Image</mat-label>
                  <app-file-upload formControlName="fileUpload"></app-file-upload>
                </div>
              </div>-->
              <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                  <button class="btn-space" [disabled]="!projectForm.valid " mat-raised-button
                    color="primary"> {{ action === 'edit' ? 'Modifier' : 'Enregistrer' }}</button>
                  <button type="button" mat-flat-button class="formCancelBtn">Annuler</button>
                </div>
              </div>
            </form>
    <!--<form class="register-form m-4" [formGroup]="projectForm" (ngSubmit)="submit()">
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Project Title</mat-label>
            <input matInput formControlName="name" placeholder="Project Title" required>
            <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>title</mat-icon>
            @if (projectForm.get('name')?.hasError('required')) {
            <mat-error>
              Project Name is required
            </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width " appearance="outline">
            <mat-label>Status</mat-label>
            <mat-select formControlName="status" id="status" required>
              <mat-option [value]="statusChoices.NEWPROJECTS">New Projects</mat-option>
              <mat-option [value]="statusChoices.RUNNING">Running</mat-option>
              <mat-option [value]="statusChoices.ONHOLD">On Hold</mat-option>
              <mat-option [value]="statusChoices.FINISHED">Finished</mat-option>
            </mat-select>
            @if (projectForm.get('status')?.hasError('required')) {
            <mat-error>
              Status is required
            </mat-error>
            }
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Team Leader</mat-label>
            <input matInput formControlName="team_leader" placeholder="Team Leader">
            <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>person_outline</mat-icon>
          </mat-form-field>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Deadline Of Project</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="deadline" required>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            @if (projectForm.get('deadline')?.hasError('required')) {
            <mat-error>
              Please select date
            </mat-error>
            }
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width " appearance="outline">
            <mat-label>Priority</mat-label>
            <mat-select formControlName="priority" id="priority" required>
              <mat-option [value]="priorityChoices.LOW">Low</mat-option>
              <mat-option [value]="priorityChoices.MEDIUM">Medium</mat-option>
              <mat-option [value]="priorityChoices.HIGH">High</mat-option>
            </mat-select>
            @if (projectForm.get('priority')?.hasError('required')) {
            <mat-error>
              Priority is required
            </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Open Task</mat-label>
            <input matInput formControlName="open_task" type="number" placeholder="Open Task">
            <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>task_alt</mat-icon>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width " appearance="outline">
            <mat-label>Type</mat-label>
            <mat-select formControlName="type" id="type" required>
              <mat-option [value]="projectType.WEB">Website</mat-option>
              <mat-option [value]="projectType.ANDROID">Android</mat-option>
              <mat-option [value]="projectType.IPHONE">IPhone</mat-option>
              <mat-option [value]="projectType.TESTING">Testing</mat-option>
            </mat-select>
            @if (projectForm.get('type')?.hasError('required')) {
            <mat-error>
              Project Type is required
            </mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Created Date</mat-label>
            <input matInput [matDatepicker]="picker1" formControlName="created" required>
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
            @if (projectForm.get('created')?.hasError('required')) {
            <mat-error>
              Please select date
            </mat-error>
            }
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Project Progress</mat-label>
            <input matInput formControlName="progress" type="number" placeholder="Project Progress">
            <mat-icon class="material-icons-outlined color-icon p-3" matSuffix>percent</mat-icon>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
          <mat-form-field class="example-full-width mb-3" appearance="outline">
            <mat-label>Descriptions Of The Project</mat-label>
            <textarea matInput formControlName="description" class="description-area" required>
                        </textarea>
            @if (projectForm.get('description')?.hasError('required')) {
            <mat-error>
              Descriptions is required
            </mat-error>
            }
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
          <div class="example-button-row">
            <button mat-flat-button class="formSubmitBtn" [disabled]="!projectForm.valid" type="submit">Save</button>
            <button mat-flat-button mat-dialog-close class="formCancelBtn" tabindex="-1">Cancel</button>
          </div>
        </div>
      </div>
    </form>-->
  </div>
</div>